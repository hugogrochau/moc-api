<?xml version="1.0" encoding="utf-8"?>
<database name="default" defaultIdMethod="native" defaultPhpNamingMethod="underscore" namespace="MocApi\Models">
  <table name="address" schema="moc" idMethod="native" phpName="Address">
    <column name="id" phpName="Id" type="BIGINT" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="city" phpName="City" type="VARCHAR" size="100" required="true"/>
    <column name="complement" phpName="Complement" type="VARCHAR" size="50"/>
    <column name="neighborhood" phpName="Neighborhood" type="VARCHAR" size="100" required="true"/>
    <column name="number" phpName="Number" type="INTEGER" required="true"/>
    <column name="state" phpName="State" type="VARCHAR" size="50" required="true"/>
    <column name="street" phpName="Street" type="VARCHAR" size="100" required="true"/>
    <column name="CEP" phpName="CEP" type="VARCHAR" size="9" required="true"/>
    <column name="type" phpName="Type" type="ENUM" valueSet="home, work" defaultValue="home" defaultExpr="home"/>
    <column name="created" phpName="Created" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP"/>
  </table>
  <table name="address_hospital" schema="moc" idMethod="native" phpName="AddressHospital">
    <column name="address_id" phpName="AddressId" type="INTEGER" primaryKey="true" required="true"/>
    <column name="hospital_id" phpName="HospitalId" type="INTEGER" primaryKey="true" required="true"/>
    <foreign-key foreignTable="address" name="address_hospital_address_id_fkey">
      <reference local="address_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="hospital" name="address_hospital_hospital_id_fkey">
      <reference local="hospital_id" foreign="id"/>
    </foreign-key>
  </table>
  <table name="address_patient" schema="moc" idMethod="native" phpName="AddressPatient">
    <column name="address_id" phpName="AddressId" type="INTEGER" primaryKey="true" required="true"/>
    <column name="patient_id" phpName="PatientId" type="INTEGER" primaryKey="true" required="true"/>
    <foreign-key foreignTable="address" name="address_patient_address_id_fkey">
      <reference local="address_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="patient" name="address_patient_patient_id_fkey">
      <reference local="patient_id" foreign="id"/>
    </foreign-key>
  </table>
  <table name="address_user" schema="moc" idMethod="native" phpName="AddressUser">
    <column name="address_id" phpName="AddressId" type="INTEGER" primaryKey="true" required="true"/>
    <column name="user_id" phpName="UserId" type="INTEGER" primaryKey="true" required="true"/>
    <foreign-key foreignTable="address" name="address_user_address_id_fkey">
      <reference local="address_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="user" name="address_user_user_id_fkey">
      <reference local="user_id" foreign="id"/>
    </foreign-key>
  </table>
  <table name="equipment" schema="moc" idMethod="native" phpName="Equipment">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="name" phpName="Name" type="VARCHAR" size="50" required="true"/>
    <column name="description" phpName="Description" type="VARCHAR" size="500"/>
    <column name="quantity" phpName="Quantity" type="INTEGER" defaultValue="1" defaultExpr="1" required="true"/>
    <column name="created" phpName="Created" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP" />
  </table>
  <table name="hospital" schema="moc" idMethod="native" phpName="Hospital">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="name" phpName="Name" type="VARCHAR" size="100" required="true"/>
    <column name="created" phpName="Created" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP" />
  </table>
  <table name="user" schema="moc" idMethod="native" phpName="User">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="email" phpName="Email" type="VARCHAR" size="256"/>
    <column name="password" phpName="Password" type="VARCHAR" size="70"/>
    <column name="name" phpName="Name" type="VARCHAR" size="100" required="true"/>
    <column name="CPF" phpName="CPF" type="VARCHAR" size="12" required="true"/>
	<column name="birth_date" phpName="BirthDate" type="DATE"/>
    <column name="gender" phpName="Gender" type="ENUM" valueSet="male, female, other"/>
    <column name="app_id" phpName="AppId" type="VARCHAR" size="50"/>
    <column name="type" phpName="Type" type="ENUM" valueSet="surgeon, secretary, medical_staff"/>
    <column name="created" phpName="Created" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP"/>
  </table>
  <table name="patient" schema="moc" idMethod="native" phpName="Patient">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="cpf" phpName="CPF" type="VARCHAR" size="12"/>
    <column name="name" phpName="Name" type="VARCHAR" size="100" required="true"/>
    <column name="birth_date" phpName="BirthDate" type="DATE" required="true"/>
    <column name="gender" phpName="Gender" type="ENUM" valueSet="male, female, other" required="true"/>
    <column name="weight" phpName="Weight" type="DOUBLE" />
    <column name="legal_guardian_id" phpName="LegalGuardianId" type="INTEGER"/>
    <column name="notes" phpName="Notes" type="VARCHAR" size="500"/>
    <column name="created" phpName="Created" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP"/>
	<foreign-key foreignTable="legal_guardian" name="patient_legal_guardian_id_fkey">
      <reference local="legal_guardian_id" foreign="id"/>
    </foreign-key>
  </table>
  <table name="material" schema="moc" idMethod="native" phpName="Material">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="name" phpName="Name" type="VARCHAR" size="100" required="true"/>
    <column name="description" phpName="Description" type="VARCHAR" size="500"/>
    <column name="quantity" phpName="Quantity" type="INTEGER" defaultValue="1" defaultExpr="1"/>
	<column name="created" phpName="Created" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP"/>
  </table>
  <table name="surgeon" schema="moc" idMethod="native" phpName="Surgeon">
    <column name="user_id" phpName="UserId" type="INTEGER" primaryKey="true" required="true"/>
    <column name="specialty" phpName="Specialty" type="VARCHAR" size="100" required="true"/>
    <column name="CRM" phpName="CRM" type="VARCHAR" size="12" required="true"/>
    <column name="CFMUF" phpName="CRMUF" type="VARCHAR" size="3" required="true"/>
	<column name="created" phpName="Created" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP"/>
	<foreign-key foreignTable="user" name="surgeon_user_id_fkey">
      <reference local="user_id" foreign="id"/>
    </foreign-key>
  </table>
  <table name="surgeon_secretary" schema="moc" idMethod="native" isCrossRef="true" phpName="SurgeonSecretary">
    <column name="user_id" phpName="UserId" type="INTEGER" primaryKey="true" required="true"/>
    <column name="surgeon_id" phpName="SurgeonId" type="INTEGER" primaryKey="true" required="true"/>
    <foreign-key foreignTable="user" name="surgeon_secretary_user_id_fkey">
      <reference local="user_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="surgeon" name="surgeon_secretary_surgeon_id_fkey">
      <reference local="surgeon_id" foreign="user_id"/>
    </foreign-key>
  </table>
  <table name="surgeon_surgery" schema="moc" idMethod="native" isCrossRef="true" phpName="SurgeonSurgery">
    <column name="surgeon_id" phpName="SurgeonId" type="INTEGER" primaryKey="true" required="true"/>
    <column name="surgery_id" phpName="SurgeryId" type="INTEGER" primaryKey="true" required="true"/>
    <foreign-key foreignTable="surgeon" name="surgeon_surgery_surgeon_id_fkey">
      <reference local="surgeon_id" foreign="user_id"/>
    </foreign-key>
    <foreign-key foreignTable="surgery" name="surgeon_surgery_surgery_id_fkey">
      <reference local="surgery_id" foreign="id"/>
    </foreign-key>
  </table>
  <table name="surgery" schema="moc" idMethod="native" phpName="Surgery">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="status" phpName="Status" type="VARCHAR" size="100" required="true"/>
    <column name="patient_id" phpName="PatientId" type="INTEGER" required="true"/>
    <column name="creator_id" phpName="CreatorId" type="INTEGER" required="true"/>
    <column name="surgery_type_id" phpName="SurgeryTypeId" type="INTEGER" required="true"/>
    <column name="created" phpName="Created" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP"/>
    <foreign-key foreignTable="patient" name="surgery_patient_id_fkey">
      <reference local="patient_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="user" name="surgery_creator_id_fkey" phpName="Creator">
      <reference local="creator_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="surgery_type" name="surgery_surgery_type_id_fkey">
      <reference local="surgery_type_id" foreign="id"/>
    </foreign-key>
  </table>
  <table name="surgery_equipment" schema="moc" idMethod="native" isCrossRef="true" phpName="SurgeryEquipment">
    <column name="surgery_id" phpName="SurgeryId" type="INTEGER" primaryKey="true" required="true"/>
    <column name="equipment_id" phpName="EquipmentId" type="INTEGER" primaryKey="true" required="true"/>
    <foreign-key foreignTable="surgery" name="surgery_equipment_surgery_id_fkey">
      <reference local="surgery_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="equipment" name="surgery_equipment_equipment_id_fkey">
      <reference local="equipment_id" foreign="id"/>
    </foreign-key>
  </table>
  <table name="surgery_field" schema="moc" idMethod="native" phpName="SurgeryField">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="name" phpName="Name" type="VARCHAR" size="100" required="true"/>
    <column name="type" phpName="Type" type="ENUM" valueSet="checkbox, date, number, date" required="true"/>
    <column name="category_id" phpName="CategoryId" type="INTEGER" required="true"/>   
    <column name="surgery_form_id" phpName="SurgeryFormId" type="INTEGER" required="true"/>
    <column name="created" phpName="Created" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP"/>
    <foreign-key foreignTable="category" name="surgery_field_category_id_fkey">
      <reference local="category_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="surgery_form" name="surgery_field_surgery_form_id_fkey">
      <reference local="surgery_form_id" foreign="id"/>
    </foreign-key>
  </table>
  <table name="surgery_field_category" schema="moc" idMethod="native" phpName="SurgeryFieldCategory">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="name" phpName="Name" type="VARCHAR" size="100" required="true"/>
    <column name="surgery_type_id" phpName="SurgeryTypeId" type="INTEGER" required="true"/>
    <column name="created" phpName="Created" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP"/>
    <foreign-key foreignTable="surgery_type" name="surgery_field_category_surgery_type_id_fkey">
      <reference local="surgery_type_id" foreign="id"/>
    </foreign-key>
  </table>
  <table name="surgery_field_value" schema="moc" idMethod="native" phpName="SurgeryFieldValue">
    <column name="surgery_field_id" phpName="SurgeryFieldId" type="INTEGER" required="true"/>   
    <column name="surgery_id" phpName="SurgeryId" type="INTEGER" required="true"/>
    <column name="value" phpName="Value" type="VARCHAR" size="500" required="true"/>
    <foreign-key foreignTable="surgery_field" name="surgery_field_value_surgery_field_id_fkey">
      <reference local="surgery_field_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="surgery" name="surgery_field_value_surgery_id_fkey">
      <reference local="surgery_id" foreign="id"/>
    </foreign-key>
  </table>
  <table name="surgery_materials" schema="moc" idMethod="native" phpName="SurgeryMaterials" isCrossRef="true">
    <column name="surgery_id" phpName="SurgeryId" type="INTEGER" primaryKey="true" required="true"/>
    <column name="material_id" phpName="MaterialId" type="INTEGER" primaryKey="true" required="true"/>
    <foreign-key foreignTable="material" name="surgery_material_material_id_fkey">
      <reference local="material_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="surgery" name="surgery_material_surgery_id_fkey">
      <reference local="surgery_id" foreign="id"/>
    </foreign-key>
  </table>
  <table name="surgery_TUSS" schema="moc" idMethod="native" phpName="SurgeryTUSS">
    <column name="surgery_id" phpName="SurgeryId" type="INTEGER" primaryKey="true" required="true"/>
    <column name="TUSS_id" phpName="TUSSId" type="INTEGER" primaryKey="true" required="true"/>
    <foreign-key foreignTable="surgery" name="surgery_TUSS_surgery_id_fkey">
      <reference local="surgery_id" foreign="id"/>
    </foreign-key>
    <foreign-key foreignTable="TUSS" name="surgery_TUSS_TUSS_id_fkey">
      <reference local="TUSS_id" foreign="id"/>
    </foreign-key>
  </table>
  <table name="surgery_type" schema="moc" idMethod="native" phpName="SurgeryType">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="title" phpName="Title" type="VARCHAR" size="100" required="true"/>
    <column name="description" phpName="Description" type="VARCHAR" size="500"/>
    <column name="created" phpName="Created" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP"/>
  </table>
  <table name="TUSS" schema="moc" idMethod="native" phpName="TUSS">
    <column name="id" phpName="Id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
    <column name="code" phpName="Codigo" type="INTEGER" required="true"/>
    <column name="descricao" phpName="Descricao" type="VARCHAR" size="150"/>
    <column name="created" phpName="Created" type="TIMESTAMP" defaultExpr="CURRENT_TIMESTAMP"/>
  </table>
</database>